// Based on http://www.i18nqa.com/debug/utf8-debug.html
const mapping = new Map<RegExp, string>();

mapping.set(/â‚¬/g, '€');
mapping.set(/â€š/g, '‚');
mapping.set(/Æ’/g, 'ƒ');
mapping.set(/â€ž/g, '„');
mapping.set(/â€¦/g, '…');
mapping.set(/â€\u00A0/g, '†');
mapping.set(/â€¡/g, '‡');
mapping.set(/Ë†/g, 'ˆ');
mapping.set(/â€°/g, '‰');
mapping.set(/Å\u00A0/g, 'Š');
mapping.set(/â€¹/g, '‹');
mapping.set(/Å’/g, 'Œ');
mapping.set(/Å½/g, 'Ž');
mapping.set(/â€˜/g, '‘');
mapping.set(/â€™/g, '’');
mapping.set(/â€œ/g, '“');
mapping.set(/â€\u009D/g, '”');
mapping.set(/â€¢/g, '•');
mapping.set(/â€“/g, '–');
mapping.set(/â€”/g, '—');
mapping.set(/Ëœ/g, '˜');
mapping.set(/â„¢/g, '™');
mapping.set(/Å¡/g, 'š');
mapping.set(/â€º/g, '›');
mapping.set(/Å“/g, 'œ');
mapping.set(/Å¾/g, 'ž');
mapping.set(/Å¸/g, 'Ÿ');
mapping.set(/Â /g, ' ');
mapping.set(/Â¡/g, '¡');
mapping.set(/Â¢/g, '¢');
mapping.set(/Â£/g, '£');
mapping.set(/Â¤/g, '¤');
mapping.set(/Â¥/g, '¥');
mapping.set(/Â¦/g, '¦');
mapping.set(/Â§/g, '§');
mapping.set(/Â¨/g, '¨');
mapping.set(/Â©/g, '©');
mapping.set(/Âª/g, 'ª');
mapping.set(/Â«/g, '«');
mapping.set(/Â¬/g, '¬');
mapping.set(/Â­/g, '­');
mapping.set(/Â®/g, '®');
mapping.set(/Â¯/g, '¯');
mapping.set(/Â°/g, '°');
mapping.set(/Â±/g, '±');
mapping.set(/Â²/g, '²');
mapping.set(/Â³/g, '³');
mapping.set(/Â´/g, '´');
mapping.set(/Âµ/g, 'µ');
mapping.set(/Â¶/g, '¶');
mapping.set(/Â·/g, '·');
mapping.set(/Â¸/g, '¸');
mapping.set(/Â¹/g, '¹');
mapping.set(/Âº/g, 'º');
mapping.set(/Â»/g, '»');
mapping.set(/Â¼/g, '¼');
mapping.set(/Â½/g, '½');
mapping.set(/Â¾/g, '¾');
mapping.set(/Â¿/g, '¿');
mapping.set(/Ã€/g, 'À');
mapping.set(/Ã‚/g, 'Â');
mapping.set(/Ãƒ/g, 'Ã');
mapping.set(/Ã„/g, 'Ä');
mapping.set(/Ã…/g, 'Å');
mapping.set(/Ã†/g, 'Æ');
mapping.set(/Ã‡/g, 'Ç');
mapping.set(/Ãˆ/g, 'È');
mapping.set(/Ã‰/g, 'É');
mapping.set(/ÃŠ/g, 'Ê');
mapping.set(/Ã‹/g, 'Ë');
mapping.set(/ÃŒ/g, 'Ì');
mapping.set(/Ã\u008D/g, 'Í');
mapping.set(/ÃŽ/g, 'Î');
mapping.set(/Ã\u008F/g, 'Ï');
mapping.set(/Ã\u0090/g, 'Ð');
mapping.set(/Ã‘/g, 'Ñ');
mapping.set(/Ã’/g, 'Ò');
mapping.set(/Ã“/g, 'Ó');
mapping.set(/Ã”/g, 'Ô');
mapping.set(/Ã•/g, 'Õ');
mapping.set(/Ã–/g, 'Ö');
mapping.set(/Ã—/g, '×');
mapping.set(/Ã˜/g, 'Ø');
mapping.set(/Ã™/g, 'Ù');
mapping.set(/Ãš/g, 'Ú');
mapping.set(/Ã›/g, 'Û');
mapping.set(/Ãœ/g, 'Ü');
mapping.set(/Ã\u009D/g, 'Ý');
mapping.set(/Ãž/g, 'Þ');
mapping.set(/ÃŸ/g, 'ß');
mapping.set(/Ã\u00A0/g, 'à');
mapping.set(/Ã¡/g, 'á');
mapping.set(/Ã¢/g, 'â');
mapping.set(/Ã£/g, 'ã');
mapping.set(/Ã¤/g, 'ä');
mapping.set(/Ã¥/g, 'å');
mapping.set(/Ã¦/g, 'æ');
mapping.set(/Ã§/g, 'ç');
mapping.set(/Ã¨/g, 'è');
mapping.set(/Ã©/g, 'é');
mapping.set(/Ãª/g, 'ê');
mapping.set(/Ã«/g, 'ë');
mapping.set(/Ã¬/g, 'ì');
mapping.set(/Ã\u00AD/g, 'í');
mapping.set(/Ã®/g, 'î');
mapping.set(/Ã¯/g, 'ï');
mapping.set(/Ã°/g, 'ð');
mapping.set(/Ã±/g, 'ñ');
mapping.set(/Ã²/g, 'ò');
mapping.set(/Ã³/g, 'ó');
mapping.set(/Ã´/g, 'ô');
mapping.set(/Ãµ/g, 'õ');
mapping.set(/Ã¶/g, 'ö');
mapping.set(/Ã·/g, '÷');
mapping.set(/Ã¸/g, 'ø');
mapping.set(/Ã¹/g, 'ù');
mapping.set(/Ãº/g, 'ú');
mapping.set(/Ã»/g, 'û');
mapping.set(/Ã¼/g, 'ü');
mapping.set(/Ã½/g, 'ý');
mapping.set(/Ã¾/g, 'þ');
mapping.set(/Ã¿/g, 'ÿ');

export default function fixCommonUTF8Problems(text: string): string {
    let newText = text;
    for (const [bad, correct] of mapping)
        newText = newText.replace(bad, correct);
    return newText;
};
